const e=e=>"string"==typeof e,t=e=>"object"==typeof e&&null!==e,s=(e,t,s)=>String(e).slice(t,s),n=(e,t,s)=>String(e).padStart(t,s),r=e=>String(e),i=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|H{1,2}|h{1,2}|m{1,2}|s{1,2}|w{1}|S{1,3}|t{1}/g,o=e=>e%4==0&&(e%100!=0||e%400==0);function a(e,...t){return t.forEach((t=>{e=u(e,t)})),e}function u(s,n){for(const r in n)r in s?e(s[r])?e(n[r])&&(s[r]=n[r]):t(s[r])&&t(n[r])&&u(s[r],n[r]):s[r]=n[r];return s}const c=(e,t,s,n,r,i,o)=>t?new Date(e,t-1,null!=s?s:0,null!=n?n:0,null!=r?r:0,null!=i?i:0,null!=o?o:0):new Date(e),h={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},l={name:"zn",minutes:"分钟",seconds:"秒",hours:"小时",date:"天",month:"月",year:"年"};var m={en:h};class d{constructor(s,n,r,i,o,a,u){if(this.language="en",this.parse=Date.parse,void 0===s)this.$Date=new Date;else if(e(s)){const e=this.parse(s);if(!(e=>"number"==typeof e&&!isNaN(e))(e))throw new TypeError("当前格式不能转化为日期格式");this.$Date=c(e)}else if((e=>e instanceof Date)(s))this.$Date=(e=>new Date(e))(s);else if(t(s)){let{year:e,month:t,date:n,hours:r,minutes:i,seconds:o,milliseconds:a}=s;this.$Date=c(null!=e?e:1970,t,n,r,i,o,a)}else this.$Date=c(s,n,r,i,o,a,u);this.$local=m[this.language],this.init()}init(){const{$Date:e}=this;this.$year=e.getFullYear(),this.$month=e.getMonth()+1,this.$date=e.getDate(),this.$week=e.getDay(),this.$hours=e.getHours(),this.$minutes=e.getMinutes(),this.$seconds=e.getSeconds(),this.$milliseconds=e.getMilliseconds(),this.$time=e.getTime()}create(e={}){const[t,s,n,r,i,o,u]=this.get(["fullYear","month","date","hours","minutes","seconds","milliseconds"]);return new d(a(e,{year:t,month:s,date:n,hours:r,minutes:i,seconds:o,milliseconds:u}))}format(e="YYYY-MM-DD HH-mm-ss"){const{$year:t,$month:o,$date:a,$week:u,$hours:c,$minutes:h,$seconds:l,$milliseconds:m,$time:d,$local:f}=this,g={YY:s(t,-2),YYY:s(t,-3),YYYY:r(t),M:r(o+1),MM:n(o,2,"0"),MMM:s(f.months[o-1],0,3),MMMM:f.months[o-1],D:r(a),DD:n(a,2,"0"),w:r(u),H:r(c),HH:n(c,2,"0"),h:n(c%12||12,1,"0"),hh:n(c%12||12,2,"0"),m:r(h),mm:n(h,2,"0"),s:r(l),ss:n(l,2,"0"),S:r(m),SSS:n(m,3,"0"),t:r(d)};return e.replace(i,((e,t)=>t||g[e]))}set(t,s){e(t)&&(t={[t]:s});for(const e in t)this.processDate(e,t[e],!1);return this.init(),this}get(t){if(e(t))return this[t]();const s=[];return t.forEach((e=>{"fullYear"===e?s.push(this.$year):s.push(this["$"+e])})),s}year(e){return this.processDate("fullYear",e)}month(e){return this.processDate("month",e)}date(e){return this.processDate("date",e)}hours(e){return this.processDate("hours",e)}minutes(e){return this.processDate("minutes",e)}seconds(e){return this.processDate("seconds",e)}milliseconds(e){return this.processDate("milliseconds",e)}time(e){return this.processDate("time",e)}isBefore(e){return!!(this.time()>e.time())}isAfter(e){return!!(this.time()<e.time())}week(){return this.$week}processDate(e,t,s=!0){let n=(r=e).slice(0,1).toUpperCase()+r.slice(1);var r;return t?("month"===e&&(t-=1),this.$Date["set"+n](t),s&&this.init(),this):"fullYear"===e?this.$year:this["$"+e]}static use(e,t){e.call(d,t)}}const f=["seconds","minutes","hours","date","month","year"];class g{constructor(e){this.maxTime=2592e6,this.config={},this.time=e.time()}format(e,t="前"){e instanceof d||(e=new d(e));const s=["seconds","minutes","hours","date","month","year"].reverse();let n=Math.abs(this.time-e.time());if(this.maxTime<n)return e.format("YYYY-MM-DD hh-mm-ss");const r=this.calculator(n);if(this.config.exact){let e="";for(const t of s)r[t]&&(e+=r[t]+l[t]);return e+t}return r.endValue+l[r.endName]+t}calculator(e){var t;const s={endValue:0,endName:"milliseconds"},n=f,r=[1e3,60,60,24,30,12];if(this.config.exact){const i=n.indexOf(null!==(t=this.config.exactValue)&&void 0!==t?t:"minutes");r.forEach(((t,o)=>{var a;const u=Math.floor(e/t)%(null!==(a=r[o+1])&&void 0!==a?a:Number.MAX_SAFE_INTEGER);u>0&&o>=i&&(s[n[o]]=u),e/=t}))}else r.forEach(((t,i)=>{var o;const a=Math.floor(e/t)%(null!==(o=r[i+1])&&void 0!==o?o:Number.MAX_SAFE_INTEGER);a>0&&(s[n[i]]=a,s.endValue=a,s.endName=n[i]),e/=t}));return s}processConfig(t){this.config=t,t.maxTimeStamp?this.maxTime=e(t.maxTimeStamp)?Number.MAX_SAFE_INTEGER:t.maxTimeStamp:t.customTime&&(this.maxTime=new d(t.customTime).time())}}const p=[31,28,31,30,31,30,31,31,30,31,30,31];function y(e){const[t,s]=e.get(["fullYear","month"]);return o(t)&&2===s?29:p[s-1]}function D(e){const[t]=e.get(["fullYear"]);return o(t)?366:365}function M(e){return e.date()}function $(e){let t=0;const[s,n]=e.get(["month","date"]);for(let e=1;e<s;e++)t+=p[e-1];return t+n}function Y(e,t){const s=e.prototype;s.dayInMonth=y,s.dayInYear=D,s.dayToMonth=M,s.dayToYear=$}function _(e){const[t,s]=e.get(["month","fullYear"]),n=e.create({year:s,month:t,date:1}).get("week"),r=y(e);return E(r,n)}function w(e){const[t,s]=e.get(["date","week"]);return E(t,s,!0)}function S(e){const[t]=e.get(["fullYear"]),[s]=e.create({year:t,month:1,date:1}).get(["week"]),n=D(e);return E(n,s)}function T(e){const[t]=e.get(["week"]),s=$(e);return E(s,t,!0)}const E=(e,t,s=!1)=>s?Math.ceil((e-t)/7):0===t?Math.ceil(e/7):Math.ceil((e-(8-t))/7);function x(e,t,s,n,r,i,o){return e?new d(e):t?new d(e,t,s,n,r,o):new d}function N(e){return new g(e)}x.prototype.use=d.use;export{g as Diff,d as ModJs,y as dayInMonth,D as dayInYear,M as dayToMonth,$ as dayToYear,Y as days,N as diff,x as modJs,_ as weekInMonth,S as weekInYear,w as weekToMonth,T as weekToYear};
